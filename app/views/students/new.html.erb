<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="<%= root_path %>"><%= image_tag 'logo_duke.png', class: 'logo-nav' %></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/about">About</a></li>
        <li><a href="/clinics">Clinics</a></li>
        <li><a href="/faq">FAQs</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
      <!-- admin section -->
      <% if current_user != nil && current_user.admin %>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin Menu <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/admin/clinics">Scheduled Clinics</a></li>
            <li><a href="/clinics/new">Add a Clinic</a></li>
            <li class="divider"></li>
            <li><%= link_to'Log Out', destroy_user_session_path, method: 'delete' %></li>
          </ul>
        </li>
      </ul>
      <% end %>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="container">
  <div class="col-xs-10 col-xs-offset-1">
    <h1><%= @student.clinic.name %></h1>
    <p><%= @student.clinic.date_time.strftime "%A %b %e, %Y at %l:%M %P" %></p>
    <p><%= @student.clinic.description %></p>
  </div>
  <% if flash[:alert] != nil %>
    <div class="col-xs-10 col-xs-offset-1 bottom-margin">
      <p class="alert"><%= flash[:alert] %></p>
    </div>
  <% else %>
    <div class="col-xs-10 col-xs-offset-2">
      <%= form_for @student, multipart: true do |f| %>

      <div class="field">
        <%= f.label :name %>
        <%= f.text_field :name, id: 'name' %>
      </div>

        <%= f.hidden_field :clinic_id, value: @student.clinic.id %>
        <%= f.hidden_field :stripe_card_token %>
        <%= f.hidden_field :amount, value: @student.clinic.price.to_i * 100 %>

      <div class="field">
        <%= f.label :email %>
        <%= f.text_field :email %>
      </div>

      <% if @student.stripe_card_token %>
        <p>Credit Card has been provided</p>
      <% else %>

        <div class="field">
          <%= label_tag :card_number, "Credit Card Number" %>
          <%= text_field_tag :card_number, nil, name: nil %>
        </div>

        <div class="field">
          <%= label_tag :card_code, "Security Code on Card (CVV)" %>
          <%= text_field_tag :card_code, nil, name: nil %>
        </div>

        <div class="field">
          <%= label_tag :card_month, "Card Expiration" %>
          <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"} %>
          <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year + 15}, {name: nil, id: "card_year"} %>
        </div>
      <% end %>
        <div id="stripe_error">
          <noscript>JavaScript is not enabled and is required for this form. First enable it in your browser settings.</noscript>
        </div>
        <div class="field_with_errors">
          <%= @student.errors.full_messages.join(', ') %>
        </div>
      <div class="actions">
        <%= f.submit %>
      </div>
      <% end %>
    </div>

  <% end %>


</div>
